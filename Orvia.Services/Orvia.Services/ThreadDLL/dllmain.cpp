// dllmain.cpp : Définit le point d'entrée de l'application DLL.

#include "pch.h"

// **********************************************************************************************************
//  Functions to export
// **********************************************************************************************************

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////// CreateThread /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

__declspec(dllexport) ThreadNid*  CreateThread(     char*       _deviceBalance  ,
                                                    char*       _deviceRFID     ,

						                            int			_baud           ,
					                                int			_nbDataBits     ,
						                            int			_parity         ,        
						                            int			_nbStopBits     ,

						                            char*       _SNAntenne      ,
						                            char*       _SNBalance      ,

						                            double      _minPoidsOeuf   ,
						                            double      _maxPoidsOeuf   ,
						                            double      _minPoidsPoule  ,
						                            double      _maxPoidsPoule  ,  

						                            int			_debug          ,
						                            char*       _pathDebugFile		)
{

    ThreadNid *threadNid = new ThreadNid(   _deviceBalance, _deviceRFID, _baud, _nbDataBits, _parity, _nbStopBits, _SNAntenne, _SNBalance,
                                            _minPoidsOeuf, _maxPoidsOeuf, _minPoidsPoule, _maxPoidsPoule,
                                            _debug, _pathDebugFile                                                                           );

    return threadNid;

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////// KillThread /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


__declspec(dllexport) void KillThread(ThreadNid* threadNid)
{

    threadNid->Terminate();

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////// WakeUpThread /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


__declspec(dllexport) int WakeUpThread(ThreadNid* threadNid)
{

    return threadNid->WakeUpThread();

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////// getStatut /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


__declspec(dllexport) int getStatut(ThreadNid* threadNid)
{

    return threadNid->getStatut();

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////// getError /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


__declspec(dllexport) const char* getError(ThreadNid* threadNid)
{

    return threadNid->getError();

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////// getNbOeuf /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


__declspec(dllexport) int getNbOeuf(ThreadNid* threadNid)
{

    return threadNid->getNbOeuf();

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////// getPontes /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


__declspec(dllexport) int getPontes(ThreadNid* threadNid, char ***pontes)
{

    int ret;

    ret = threadNid->getPontes(pontes);

    return ret; 

}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////

// **********************************************************************************************************
//  Main entry Lib
// **********************************************************************************************************

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

